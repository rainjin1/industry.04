#include <stdio.h>   // printf, gets 함수 사용
#include <stdlib.h>  // malloc, free 함수 사용
#include <string.h>  // strlen, strcpy 함수 사용

int main(void)
{
    char temp[80];   // 문자열을 임시로 입력받는 버퍼 (최대 79글자 + '\0')
    char *str[3];    // 문자열 3개를 저장할 포인터 배열
                     // str[0], str[1], str[2] 각각이 문자열의 시작 주소를 가짐
    int i;

    /* ===============================
       문자열 입력 + 동적 메모리 할당
       =============================== */
    for (i = 0; i < 3; i++)
    {
        printf("문자열을 입력하세요 : ");

        gets(temp);
        // 사용자로부터 문자열을 입력받아 temp 배열에 저장
        // ⚠ gets는 입력 길이 제한이 없어 실제로는 위험한 함수 (교육용 예제)

        str[i] = (char *)malloc(strlen(temp) + 1);
        // 입력된 문자열 길이만큼 동적 메모리 할당
        // strlen(temp) : 문자열 길이 (널 문자 '\0' 제외)
        // +1 : 문자열 끝을 나타내는 '\0' 저장 공간

        strcpy(str[i], temp);
        // temp에 저장된 문자열을
        // 동적으로 할당된 메모리(str[i])로 복사
    }

      // 저장된 문자열 출력

    for (i = 0; i < 3; i++)
    {
        printf("%s\n", str[i]);
        // 각 포인터가 가리키는 문자열을 출력
    }

    /* ===============================
       동적 메모리 해제
       =============================== */
    for (i = 0; i < 3; i++)
    {
        free(str[i]);
        // malloc으로 할당한 메모리를 반드시 해제
        // 메모리 누수(memory leak) 방지
    }

    return 0;
}
